<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Men√∫ - Las Tuks</title>
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            text-align: center;
            background: url('/static/tuks-img.png') center center / cover no-repeat fixed;
            color: #222;
            margin: 0;
            padding: 0;
        }

        h1 {
            margin-top: 40px;
            font-size: 2.5em;
            color: #fff;
            text-shadow: 2px 2px 5px #000;
        }

        h2 {
            margin-top: -10px;
            color: #f3c623;
            text-shadow: 1px 1px 4px #000;
        }

        .menu {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 30px;
            margin-top: 60px;
        }

        .pupusa {
            background-color: rgba(255, 248, 220, 0.95);
            padding: 25px;
            border-radius: 20px;
            width: 250px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s ease;
        }

        .pupusa:hover {
            transform: scale(1.05);
        }

        .pupusa button {
            border: none;
            padding: 10px 14px;
            border-radius: 8px;
            background-color: #f3c623;
            cursor: pointer;
            font-size: 16px;
            transition: background 0.3s;
        }

        .pupusa button:hover {
            background-color: #ffdd55;
        }

        #pedido {
            background-color: rgba(255, 255, 255, 0.95);
            margin: 50px auto;
            padding: 20px;
            width: 80%;
            max-width: 800px;
            border-radius: 15px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.3);
        }

        #pedido input {
            padding: 10px;
            margin: 5px;
            border-radius: 8px;
            border: 1px solid #ccc;
            width: 45%;
        }

        .btn {
            padding: 10px 20px;
            background-color: #f3c623;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: 0.3s;
        }

        .btn:hover {
            background-color: #ffdb4d;
        }

        footer {
            color: #fff;
            font-size: 0.9em;
            margin-bottom: 20px;
            text-shadow: 1px 1px 3px #000;
        }

        /* === Mensaje motivador === */
        #mensaje-motivador {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.8);
            background-color: rgba(0, 0, 0, 0.85);
            color: #fff;
            padding: 25px 35px;
            border-radius: 20px;
            font-size: 1.3em;
            text-align: center;
            opacity: 0;
            transition: opacity 0.5s ease, transform 0.5s ease;
            z-index: 1000;
        }

        #mensaje-motivador.mostrar {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }
    </style>
</head>
<body>
    <h1>Las Tuks</h1>
    <h2>Sabor que une generaciones ü´∂</h2>

    <div class="menu">
        <div class="pupusa">
            <h3>Frijol con Queso</h3>
            <p>$1.50</p>
            <button onclick="cambiarCantidad('frijol', -1)">-</button>
            <span id="frijol">0</span>
            <button onclick="cambiarCantidad('frijol', 1)">+</button>
        </div>

        <div class="pupusa">
            <h3>Revueltas</h3>
            <p>$1.75</p>
            <button onclick="cambiarCantidad('revuelta', -1)">-</button>
            <span id="revuelta">0</span>
            <button onclick="cambiarCantidad('revuelta', 1)">+</button>
        </div>

        <div class="pupusa">
            <h3>Especialidad de la casa</h3>
            <p>$2.00</p>
            <button onclick="cambiarCantidad('especial', -1)">-</button>
            <span id="especial">0</span>
            <button onclick="cambiarCantidad('especial', 1)">+</button>
        </div>
    </div>

    <div id="pedido">
        <h3>Tu pedido</h3>
        <p id="detalle">No hay pupusas seleccionadas.</p>
        <p><strong>Total: $<span id="total">0.00</span></strong></p>
        <input type="text" id="nombre" placeholder="Tu nombre" required>
        <input type="text" id="telefono" placeholder="Tel√©fono (opcional)">
        <br><br>
        <button class="btn" onclick="realizarPedido()">Realizar pedido</button>
        <button class="btn" onclick="cancelar()">Cancelar</button>
    </div>

    <footer>¬© Las Tuks ‚Äî Pupusas artesanales ‚ù§Ô∏è</footer>

    <!-- Mensaje motivador -->
    <div id="mensaje-motivador">¬°Gracias por apoyar lo nuestro! ü´∂<br>Las Tuks te agradece ‚ù§Ô∏è</div>

    <script>
        let precios = { frijol: 1.5, revuelta: 1.75, especial: 2.0 };
        let cantidades = { frijol: 0, revuelta: 0, especial: 0 };

        function cambiarCantidad(tipo, valor) {
            cantidades[tipo] = Math.max(0, cantidades[tipo] + valor);
            document.getElementById(tipo).innerText = cantidades[tipo];
            actualizarPedido();
        }

        function actualizarPedido() {
            let detalle = "";
            let total = 0;

            for (let tipo in cantidades) {
                if (cantidades[tipo] > 0) {
                    let subtotal = precios[tipo] * cantidades[tipo];
                    total += subtotal;
                    detalle += `${cantidades[tipo]} ${tipo}(s) - $${subtotal.toFixed(2)}<br>`;
                }
            }

            document.getElementById("detalle").innerHTML = detalle || "No hay pupusas seleccionadas.";
            document.getElementById("total").innerText = total.toFixed(2);
        }

        function realizarPedido() {
            let nombre = document.getElementById("nombre").value.trim();
            let telefono = document.getElementById("telefono").value.trim();
            let total = parseFloat(document.getElementById("total").innerText);
            let pedido = document.getElementById("detalle").innerHTML.replace(/<br>/g, "\n");

            if (!nombre) {
                alert("Por favor ingresa tu nombre.");
                return;
            }

            fetch("/guardar_pedido", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ nombre, telefono, pedido, total })
            })
            .then(res => res.json())
            .then(data => {
                if (data.status === "success") {
                    mostrarMensajeMotivador();
                    resetearPedido();
                } else {
                    alert("Ocurri√≥ un error al guardar el pedido.");
                }
            });
        }

        function mostrarMensajeMotivador() {
            const mensaje = document.getElementById("mensaje-motivador");
            mensaje.classList.add("mostrar");
            setTimeout(() => mensaje.classList.remove("mostrar"), 3500);
        }

        function resetearPedido() {
            for (let tipo in cantidades) cantidades[tipo] = 0;
            actualizarPedido();
            document.getElementById("nombre").value = "";
            document.getElementById("telefono").value = "";
        }

        function cancelar() {
            resetearPedido();
        }
    </script>
</body>
</html>
